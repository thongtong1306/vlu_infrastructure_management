/* Basic layout */
:root{
  --bg:#0b1020; --card:#151a2c; --muted:#9aa4b2; --text:#e8edf6;
  --primary:#4f7cff; --danger:#ff5964; --border:#25304a;
  /* hero image: change if you host locally */
  --hero-img:url('https://vlu.edu.vn/_next/image?url=https%3A%2F%2Fvluwebmedia.s3.ap-southeast-1.amazonaws.com%2FBanner_website_3_f56f889f7b.jpg&w=3840&q=75');
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;
  color:var(--text);
  background:radial-gradient(1200px 800px at 10% 5%,#0e1530 0%,#090f1e 60%,#070b16 100%);
}

/* Shell */
.imx-container{max-width:1120px;margin:0 auto;padding:24px}
.imx-header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:20px}
.imx-title{margin:0;font-size:28px;font-weight:700;letter-spacing:.2px}
.imx-subtitle{margin:4px 0 0;color:var(--muted)}

.imx-actions{display:flex;gap:10px;flex-wrap:wrap}
.imx-btn{
  appearance:none;border:1px solid var(--border);background:transparent;color:var(--text);
  padding:10px 14px;border-radius:10px;text-decoration:none;transition:.2s;
}
.imx-btn:hover{border-color:var(--primary);transform:translateY(-1px)}
.imx-btn--primary{background:linear-gradient(180deg,#5d88ff,#3468ff);border-color:transparent;color:#fff}

.imx-card{
  background:linear-gradient(180deg,#0f1426,#0b1120);
  border:1px solid var(--border);border-radius:14px;padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.25) inset,0 2px 10px rgba(0,0,0,.35);
}
.imx-card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.imx-card__title{font-size:16px;margin:0}

/* Grids */
.imx-grid{display:grid;gap:14px}
.imx-grid--kpi{grid-template-columns:repeat(4,minmax(0,1fr));margin:14px 0}
.imx-grid--shortcuts{grid-template-columns:repeat(4,minmax(0,1fr))}
.imx-grid--two{grid-template-columns:2fr 1.2fr;margin-top:14px}
@media (max-width:960px){
  .imx-grid--kpi,.imx-grid--shortcuts{grid-template-columns:repeat(2,minmax(0,1fr))}
  .imx-grid--two{grid-template-columns:1fr}
}

/* Inputs & search */
.imx-search{display:flex;gap:10px;align-items:center}
.imx-input{
  flex:1;padding:11px 12px;border-radius:10px;border:1px solid var(--border);
  background:#0a1020;color:var(--text);
}
.imx-input::placeholder{color:#6c7a8d}

/* KPI */
.imx-kpi{display:flex;flex-direction:column;gap:6px}
.imx-kpi__label{font-size:12px;color:var(--muted)}
.imx-kpi__value{font-size:24px;font-weight:700}
.imx-danger{color:var(--danger)}

/* Shortcuts */
.imx-shortcut{
  display:flex;flex-direction:column;gap:6px;text-decoration:none;color:var(--text);
  border:1px solid transparent;transition:.2s;
}
.imx-shortcut:hover{border-color:var(--primary);transform:translateY(-2px)}
.imx-shortcut__icon{font-size:22px}
.imx-shortcut__title{font-weight:700}
.imx-shortcut__desc{color:var(--muted);font-size:12px}

/* Tables */
.imx-table-wrap{overflow:auto}
.imx-table{width:100%;border-collapse:collapse}
.imx-table th,.imx-table td{
  text-align:left;padding:10px 8px;border-bottom:1px solid var(--border);white-space:nowrap;
}
.imx-table th{color:var(--muted);font-weight:600;cursor:pointer}
.imx-table th:hover{color:#b9c6ff}

/* Sortable headers */
.imx-table th[data-sortable="true"]{position:relative;padding-right:18px;user-select:none}
.imx-table th[data-sortable="true"]::after{
  content:'↕';position:absolute;right:6px;top:50%;transform:translateY(-50%);
  font-size:11px;color:var(--muted);opacity:.6;transition:transform .12s ease,color .12s ease,opacity .12s ease;
}
.imx-table th[data-sortable="true"]:hover::after{opacity:1}
.imx-table th[aria-sort="ascending"]::after{content:'▲';color:var(--primary);opacity:1}
.imx-table th[aria-sort="descending"]::after{content:'▼';color:var(--primary);opacity:1}
.imx-table th[aria-sort="ascending"],.imx-table th[aria-sort="descending"]{color:#b9c6ff}
.imx-table th:focus{outline:2px solid var(--primary);outline-offset:2px}

/* Sort buttons */
.imx-sortbtn{
  appearance:none;border:1px solid var(--border);
  background:linear-gradient(180deg,#0f1426,#0b1120);color:var(--text);
  padding:6px 10px;border-radius:10px;font-size:12px;line-height:1;
  display:inline-flex;align-items:center;gap:6px;cursor:pointer;user-select:none;
  box-shadow:0 1px 0 rgba(255,255,255,.03) inset,0 2px 8px rgba(0,0,0,.25);
  transition:border-color .15s ease,color .15s ease,transform .06s ease,box-shadow .15s ease;
}
.imx-sortbtn:hover{border-color:var(--primary);transform:translateY(-1px)}
.imx-sortbtn:active{transform:translateY(0)}
.imx-sortbtn:focus-visible{outline:2px solid var(--primary);outline-offset:2px}
.imx-sortbtn::after{content:'↕';font-size:11px;color:var(--muted);opacity:.9}
.imx-sortbtn.is-active{color:#cfe0ff;border-color:rgba(79,124,255,.6)}
.imx-sortbtn.is-active[data-dir="asc"]::after{content:'▲';color:var(--primary)}
.imx-sortbtn.is-active[data-dir="desc"]::after{content:'▼';color:var(--primary)}

/* Forms & alerts */
.imx-form{display:flex;flex-direction:column;gap:10px;margin-top:6px}
.imx-label{font-size:12px;color:var(--muted)}
.imx-alert{padding:10px 12px;border-radius:10px;margin-bottom:10px;border:1px solid var(--border)}
.imx-alert--error{background:rgba(255,89,100,.08);border-color:rgba(255,89,100,.35);color:#ffb4b9}
.imx-input-group{position:relative}
.imx-input--with-addon{padding-right:72px}
.imx-input-addon{
  position:absolute;right:6px;top:50%;transform:translateY(-50%);
  height:28px;padding:0 10px;border-radius:8px;border:1px solid var(--border);
  background:#0b1120;color:var(--text);cursor:pointer;font-size:12px;
}
.imx-input-addon:hover{border-color:var(--primary)}
.imx-row{display:flex;align-items:center;justify-content:space-between}
.imx-checkbox{display:inline-flex;align-items:center;gap:8px;cursor:pointer}
.imx-checkbox input{accent-color:var(--primary)}

/* Finnhub-like hero */
.imx-hero{
  position:relative;min-height:100vh;
  background:
          linear-gradient(180deg,rgba(5,8,18,.65),rgba(5,8,18,.85)),
          var(--hero-img) center/cover no-repeat,
          radial-gradient(1200px 800px at 10% 5%,#0e1530 0%,#090f1e 60%,#070b16 100%);
  display:flex;flex-direction:column;
}
.imx-topbar{
  height:54px;padding:0 18px;display:flex;align-items:center;justify-content:space-between;
  background:rgba(10,14,28,.6);border-bottom:1px solid var(--border);backdrop-filter:blur(6px);
}
.imx-topbar__brand{font-weight:700;letter-spacing:.3px}
.imx-topbar__nav{display:flex;gap:16px}
.imx-auth{flex:1;display:grid;place-items:center;padding:24px}
.imx-auth__card{
  width:100%;max-width:520px;padding:22px 22px 18px;
  background:linear-gradient(180deg,#0f1426,#0b1120);
  border:1px solid var(--border);border-radius:14px;box-shadow:0 18px 60px rgba(0,0,0,.45);
}
.imx-auth__title{margin:6px 0 4px;font-size:28px;text-align:center;color:var(--text)}
.imx-auth__subtitle,.imx-auth__help{text-align:center;color:var(--muted);margin:0 0 12px}
.imx-btn--outline{
  border:1px solid var(--primary);background:transparent;color:var(--primary);
  padding:10px 14px;border-radius:10px;width:100%;
  transition:background .15s ease,color .15s ease,transform .06s ease;
}
.imx-btn--outline:hover{background:linear-gradient(180deg,#5d88ff,#3468ff);color:#fff}
.imx-btn--outline:disabled{opacity:.6;cursor:not-allowed}

/* Top nav helpers */
.imx-nav{gap:12px}
.imx-nav__links{display:flex;align-items:center;gap:14px}
.imx-nav .imx-btn--primary{padding:8px 14px;border-radius:10px}

/* Hero content */
.imx-hero__content{display:flex;align-items:center;min-height:calc(100vh - 54px)}
.imx-hero__inner{text-align:center;padding-top:24px;padding-bottom:24px}
.imx-hero__title{font-size:clamp(28px,6vw,52px);line-height:1.05;margin:10px 0 10px;letter-spacing:.2px}
.imx-hero__subtitle{max-width:820px;margin:0 auto 18px;color:var(--muted);font-size:clamp(14px,2.2vw,18px)}
.imx-hero__small{color:#8fa2c6;margin-top:10px}

.imx-cta{display:flex;justify-content:center;gap:10px;margin-top:12px;flex-wrap:wrap}
.imx-cta__btn{min-width:132px;text-align:center}

/* Features section */
#features{
  background:radial-gradient(900px 600px at 5% -10%,rgba(80,130,255,.08),transparent 60%),
  linear-gradient(180deg,#0b1120,#0b1020);
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
}
.imx-feature-grid{display:grid;gap:16px;grid-template-columns:repeat(3,minmax(0,1fr));padding:28px 0}
@media (max-width:960px){.imx-feature-grid{grid-template-columns:1fr}}
.imx-feature{background:linear-gradient(180deg,#101734,#0d1328);border:1px solid var(--border);border-radius:14px;padding:18px}
.imx-feature__icon{font-size:22px;opacity:.9}
.imx-feature__title{margin:8px 0 6px;font-weight:700}
.imx-feature__desc{color:var(--muted)}

/* Footer + links */
.imx-site-footer{padding:20px 0;color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:12px}
.imx-site-footer__links{display:flex;gap:12px;flex-wrap:wrap}
.imx-link,.imx-site-footer a{
  color:#87a6ff;text-decoration:none;transition:color .15s ease,opacity .15s ease,text-shadow .15s ease;
}
.imx-link:hover,.imx-site-footer a:hover{text-decoration:none;color:#b9c6ff;text-shadow:0 0 6px rgba(135,166,255,.25)}
.imx-link:focus-visible,.imx-site-footer a:focus-visible{outline:2px solid var(--primary);outline-offset:2px}

/* Charts */
.imx-card .recharts-default-tooltip{font-size:12px}

/* Suggestions dropdown */
.imx-sugs{
  position:absolute;z-index:20;left:0;right:0;margin-top:6px;
  max-height:240px;overflow:auto;padding:0;border-radius:10px;
}
.imx-sugrow{gap:10px;padding:8px 10px;cursor:pointer}

/* QR inline panel */
.imx-qrwrap{display:flex;gap:14px;flex-wrap:wrap;align-items:flex-start;margin-top:12px}
.imx-qrcard{
  width:300px;height:300px;position:relative;
  background:linear-gradient(180deg,#0f1426,#0b1120);
  border:1px solid var(--border);border-radius:12px;
}
.imx-qrbox{width:100%;height:100%}
.imx-qr-overlay{position:absolute;inset:0;display:grid;place-items:center;color:var(--muted);background:rgba(0,0,0,.25);pointer-events:none}
.imx-qrhelp{min-width:260px;flex:1}

/* Utility grids */
.imx-grid--three{grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
@media (max-width:960px){.imx-grid--three{grid-template-columns:1fr}}

/* Card media (top) */
.imx-card__media{
  height:140px;border-radius:10px;overflow:hidden;margin-bottom:10px;background:#0a1020;
}
.imx-card__media img{width:100%;height:100%;display:block;object-fit:cover;opacity:.95;transition:transform .18s ease}
.imx-card--hover:hover .imx-card__media img{transform:scale(1.02)}

/* Vertical stack helper */
.imx-stack{display:grid;gap:14px}

/* Horizontal card + thumbnail (left) */
.imx-card--row{display:flex;align-items:stretch;gap:14px}
.imx-card__media--left{
  width:220px;min-width:220px;height:130px;border-radius:10px;overflow:hidden;background:#0a1020;
}
.imx-card__media--left img{width:100%;height:100%;display:block;object-fit:cover;opacity:.95;transition:transform .18s ease}
.imx-card--hover:hover .imx-card__media--left img{transform:scale(1.02)}
.imx-card__body{display:flex;flex-direction:column;justify-content:center}
@media (max-width:960px){
  .imx-card__media--left{width:120px;min-width:120px;height:90px}
}

/* Simple image crossfade (for lab galleries) */
.imx-gallery{position:relative;width:100%;height:100%}
.imx-gallery img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .6s ease}
.imx-gallery img.is-active{opacity:1}

/* Hero split card: 50/50 image + content (overrides thumbnail sizing) */
.imx-card--hero{display:flex;gap:16px;align-items:stretch}
.imx-card--hero .imx-card__media--left{
  flex:1 1 50%;width:auto;min-width:0;height:340px;border-radius:12px;overflow:hidden;background:#0a1020;
}
.imx-card--hero .imx-card__media--left img{width:100%;height:100%;object-fit:cover;display:block;opacity:.95;transition:transform .18s ease}
.imx-card--hero .imx-card__body{flex:1 1 50%;display:flex;flex-direction:column;justify-content:center}
@media (max-width:960px){
  .imx-card--hero{flex-direction:column}
  .imx-card--hero .imx-card__media--left{height:220px}
}

/* =========================
   THEME: Light mode
   ========================= */

/* Light design tokens */
:root[data-theme="light"] {
  --bg: #f6f8fc;
  --card: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --primary: #3b82f6; /* keep #4f7cff if you prefer */
  --danger: #ef4444;
  --border: #e2e8f0;

  /* optional: swap hero image for light */
  /* --hero-img: url('/static/img/lab/lab1.jpg'); */
}

/* Core surfaces */
:root[data-theme="light"] body {
  color: var(--text);
  background: #f8fafc; /* override the dark radial gradient */
}

:root[data-theme="light"] .imx-card {
  background: linear-gradient(180deg, #ffffff, #f9fafb);
  border: 1px solid var(--border);
  box-shadow: 0 1px 2px rgba(16,24,40,.06), 0 1px 3px rgba(16,24,40,.1);
}

/* Inputs */
:root[data-theme="light"] .imx-input {
  background: #ffffff;
  color: var(--text);
  border-color: var(--border);
}
:root[data-theme="light"] .imx-input::placeholder { color: #94a3b8; }

/* Buttons */
:root[data-theme="light"] .imx-btn {
  background: linear-gradient(180deg, #ffffff, #f7fafc);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: 0 1px 0 rgba(255,255,255,.7) inset, 0 2px 8px rgba(16,24,40,.08);
}
:root[data-theme="light"] .imx-btn:hover { border-color: #bfdbfe; }
:root[data-theme="light"] .imx-btn:focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }

:root[data-theme="light"] .imx-btn--primary {
  background: linear-gradient(180deg, #3b82f6, #2563eb);
  color: #fff;
  border-color: transparent;
}

/* Sort buttons */
:root[data-theme="light"] .imx-sortbtn{
  background: linear-gradient(180deg, #ffffff, #f7fafc);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: 0 1px 0 rgba(255,255,255,.7) inset, 0 2px 8px rgba(16,24,40,.08);
}
:root[data-theme="light"] .imx-sortbtn::after { color: var(--muted); }

/* Tables */
:root[data-theme="light"] .imx-table th { color: var(--muted); }
:root[data-theme="light"] .imx-table td { border-bottom-color: var(--border); }
:root[data-theme="light"] .imx-table tr:hover td { background: #f8fafc; }

/* Feature blocks / sections that had dark hard-coded backgrounds */
:root[data-theme="light"] #features {
  background: linear-gradient(180deg, #ffffff, #f8fafc);
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
:root[data-theme="light"] .imx-feature {
  background: linear-gradient(180deg, #ffffff, #f9fafb);
  border: 1px solid var(--border);
}

/* Cards with dark hero/media backgrounds */
:root[data-theme="light"] .imx-card--hero .imx-card__media--left {
  background: #f1f5f9;
}

/* Optional: if NO explicit data-theme is set, respect OS preference */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --bg: #f6f8fc;
    --card: #ffffff;
    --text: #0f172a;
    --muted: #64748b;
    --primary: #3b82f6;
    --danger: #ef4444;
    --border: #e2e8f0;
  }
  :root:not([data-theme]) body { background: #f8fafc; }
}

/* ---------- layout helpers (stop inlining) ---------- */
.imx-actions { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.imx-row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
.imx-stack > * + * { margin-top:14px; }
.imx-table-wrap { overflow:auto; }
.imx-table--clickable tbody tr.is-active td { background: rgba(79,124,255,.10); }

/* Buttons: solid / outline variants already exist — unify focus */
.imx-btn { transition: box-shadow .15s ease, transform .02s ease; }
.imx-btn:focus-visible { outline:2px solid var(--primary); outline-offset:2px; }

/* Cards */
.imx-card__header { display:flex; justify-content:space-between; align-items:center; gap:12px; }
.imx-card__title { margin:0; font-weight:700; }

/* Breadcrumb */
.imx-breadcrumb { color: var(--muted); display:flex; gap:8px; align-items:center; }
.imx-breadcrumb a { color: inherit; text-decoration: underline dotted; }

/* Prose (for InstructionView) */
.imx-prose img { max-width:100%; height:auto; border-radius:12px; }

/* ---------- THEME: Light overrides ---------- */
:root[data-theme="light"] {
  --bg: #f7f9fc;
  --card: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --primary: #3b82f6;
  --danger: #ef4444;
  --border: #e2e8f0;
  --grid: #e5e7eb;
}

:root[data-theme="light"] body { background: #f8fafc; color: var(--text); }
:root[data-theme="light"] .imx-card {
  background: linear-gradient(180deg,#ffffff,#fbfdff);
  border: 1px solid var(--border);
  box-shadow: 0 1px 2px rgba(16,24,40,.06), 0 1px 3px rgba(16,24,40,.1);
}
:root[data-theme="light"] .imx-input,
:root[data-theme="light"] select.imx-input,
:root[data-theme="light"] textarea.imx-input {
  background:#ffffff; color:var(--text); border-color:var(--border);
}
:root[data-theme="light"] .imx-table th { color: var(--muted); }
:root[data-theme="light"] .imx-table td { border-bottom-color: var(--border); }
:root[data-theme="light"] .imx-table tr:hover td { background:#f8fafc; }
:root[data-theme="light"] .imx-btn { background: linear-gradient(180deg,#fff,#f7fafc); border:1px solid var(--border); }
:root[data-theme="light"] .imx-btn--primary { color:#fff; border-color:transparent; background: linear-gradient(180deg,#3b82f6,#2563eb); }
:root[data-theme="light"] .imx-alert { background:#fff; border:1px solid var(--border); color:#1f2937; }

/* Respect OS by default if no data-theme is set */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --bg:#f7f9fc; --card:#fff; --text:#0f172a; --muted:#64748b; --primary:#3b82f6; --danger:#ef4444; --border:#e2e8f0; --grid:#e5e7eb;
  }
  :root:not([data-theme]) body { background:#f8fafc; }
}

